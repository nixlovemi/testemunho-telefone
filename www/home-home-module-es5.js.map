{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","navCtrl","modalController","db","utils","arrPhones","displayPhones","version","filterStr","getAppVersion","loadPhones","postFilterPhone","getAllPhones","allPhones","ddd","phone","navigateForward","create","modal","present","onWillDismiss","data","reload","evt","searchTerm","srcElement","value","filter","trim","obj","foundPhone","indexOf","arrContent","content","obj2","name","toLowerCase","foundName","length","objPhone","find","element","lastContact","strName","date","format","event","ret","setTimeout","target","complete","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"false\\\">\\n  <ion-toolbar> <!-- mode=\\\"ios\\\" -->\\n    <ion-title class=\\\"toolbar-title\\\">\\n        <span class=\\\"title\\\">Testemunho Telefone</span>\\n        <span class=\\\"subtitle\\\">{{ version }}</span>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-fab (click)=\\\"addPhone()\\\" vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button>\\n            <ion-icon class=\\\"icon-footer\\\" name=\\\"add-circle\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n\\n    <div class=\\\"home-header\\\">\\n        <h1 class=\\\"title\\\">Filtrar</h1>\\n        <ion-searchbar (ionChange)=\\\"filterPhone($event)\\\" placeholder=\\\"Digite o telefone/nome\\\" animated></ion-searchbar>\\n    </div>\\n    <div class=\\\"container\\\">\\n        <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n            <ion-refresher-content></ion-refresher-content>\\n        </ion-refresher>\\n\\n        <ion-card (click)=\\\"openDetails(item.ddd, item.phone)\\\" *ngFor=\\\"let item of displayPhones\\\">\\n            <ion-card-header>\\n                <ion-card-title>\\n                    <ion-icon color=\\\"primary\\\" class=\\\"icon-title\\\" src=\\\"assets/tools-and-utensils.svg\\\"></ion-icon>\\n                    <span>({{ item['ddd'] }}) {{ item['phone'] }}</span>\\n                </ion-card-title>\\n            </ion-card-header>\\n        \\n            <ion-card-content>\\n                <span class=\\\"last-contact\\\">Ãšltimo contato: {{ getLastContact(item['ddd'], item['phone']) }}</span>\\n                <ion-icon color=\\\"primary\\\" class=\\\"arrow-right\\\" src=\\\"assets/seta-direita.svg\\\"></ion-icon>\\n            </ion-card-content>\\n        </ion-card>\\n    </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \".toolbar-title {\\n  overflow: visible;\\n  position: relative;\\n}\\n.toolbar-title .title {\\n  width: 100%;\\n  display: block;\\n  overflow: hidden;\\n  text-align: center;\\n  margin-bottom: -7px;\\n}\\n.toolbar-title .subtitle {\\n  font-size: 66%;\\n  color: #888;\\n}\\n.container {\\n  margin: 24vh 5% 0 5%;\\n}\\nion-card {\\n  margin-bottom: 5vh;\\n  cursor: pointer;\\n}\\n.icon-footer {\\n  font-size: 35px;\\n}\\n.arrow-right {\\n  position: absolute;\\n  right: 18px;\\n  top: -17px;\\n}\\nion-searchbar {\\n  padding: 0 9%;\\n  margin-top: -17px;\\n  color: #FFF;\\n}\\n.last-contact {\\n  font-size: 0.9em;\\n}\\n/* android only */\\n.md ion-searchbar {\\n  color: #000;\\n}\\n/* ============ */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sZWFuZHJvcGFycmEvUHJvamVjdHMvdGVzdGVtdW5oby10ZWxlZm9uZS9zcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0o7QURDSTtFQUNJLFdBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FDQ1I7QURFSTtFQUNJLGNBQUE7RUFDQSxXQUFBO0FDQVI7QURHQTtFQUNJLG9CQUFBO0FDQUo7QURFQTtFQUNFLGtCQUFBO0VBQ0EsZUFBQTtBQ0NGO0FEQ0E7RUFDRSxlQUFBO0FDRUY7QURBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QUNHRjtBRERBO0VBQ0ksYUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtBQ0lKO0FERkE7RUFDSSxnQkFBQTtBQ0tKO0FERkEsaUJBQUE7QUFFSTtFQUNJLFdBQUE7QUNJUjtBRERBLGlCQUFBIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b29sYmFyLXRpdGxlIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAudGl0bGUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogLTdweDtcbiAgICB9XG5cbiAgICAuc3VidGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDY2JTtcbiAgICAgICAgY29sb3I6ICM4ODg7XG4gICAgfVxufVxuLmNvbnRhaW5lciB7XG4gICAgbWFyZ2luOiAyNHZoIDUlIDAgNSU7XG59XG5pb24tY2FyZCB7XG4gIG1hcmdpbi1ib3R0b206IDV2aDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmljb24tZm9vdGVyIHtcbiAgZm9udC1zaXplOiAzNXB4O1xufVxuLmFycm93LXJpZ2h0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMThweDtcbiAgdG9wOiAtMTdweDtcbn1cbmlvbi1zZWFyY2hiYXIge1xuICAgIHBhZGRpbmc6IDAgOSU7XG4gICAgbWFyZ2luLXRvcDogLTE3cHg7XG4gICAgY29sb3I6ICNGRkY7XG59XG4ubGFzdC1jb250YWN0IHtcbiAgICBmb250LXNpemU6IDAuOWVtO1xufVxuXG4vKiBhbmRyb2lkIG9ubHkgKi9cbi5tZCB7XG4gICAgaW9uLXNlYXJjaGJhciB7XG4gICAgICAgIGNvbG9yOiAjMDAwO1xuICAgIH1cbn1cbi8qID09PT09PT09PT09PSAqLyIsIi50b29sYmFyLXRpdGxlIHtcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi50b29sYmFyLXRpdGxlIC50aXRsZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAtN3B4O1xufVxuLnRvb2xiYXItdGl0bGUgLnN1YnRpdGxlIHtcbiAgZm9udC1zaXplOiA2NiU7XG4gIGNvbG9yOiAjODg4O1xufVxuXG4uY29udGFpbmVyIHtcbiAgbWFyZ2luOiAyNHZoIDUlIDAgNSU7XG59XG5cbmlvbi1jYXJkIHtcbiAgbWFyZ2luLWJvdHRvbTogNXZoO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5pY29uLWZvb3RlciB7XG4gIGZvbnQtc2l6ZTogMzVweDtcbn1cblxuLmFycm93LXJpZ2h0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMThweDtcbiAgdG9wOiAtMTdweDtcbn1cblxuaW9uLXNlYXJjaGJhciB7XG4gIHBhZGRpbmc6IDAgOSU7XG4gIG1hcmdpbi10b3A6IC0xN3B4O1xuICBjb2xvcjogI0ZGRjtcbn1cblxuLmxhc3QtY29udGFjdCB7XG4gIGZvbnQtc2l6ZTogMC45ZW07XG59XG5cbi8qIGFuZHJvaWQgb25seSAqL1xuLm1kIGlvbi1zZWFyY2hiYXIge1xuICBjb2xvcjogIzAwMDtcbn1cblxuLyogPT09PT09PT09PT09ICovIl19 */\";","import { Component } from '@angular/core';\nimport { NavController, ModalController } from '@ionic/angular';\n\nimport { UtilsService } from './../utils.service';\nimport { PgAddPhonePage } from '../pg-add-phone/pg-add-phone.page';\nimport { DatabaseService } from './../database.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\n// tslint:disable-next-line: component-class-suffix\nexport class HomePage {\n  arrPhones     = [];\n  displayPhones = [];\n  version       = '';\n  filterStr     = '';\n\n  constructor(\n    private navCtrl: NavController,\n    public modalController: ModalController,\n    public db: DatabaseService,\n    private utils: UtilsService\n  ) {\n    this.version = this.utils.getAppVersion();\n  }\n\n  async ionViewWillEnter() {\n    await this.loadPhones();\n    this.postFilterPhone(this.filterStr);\n  }\n\n  async loadPhones() {\n    const allPhones = await this.db.getAllPhones();\n    this.arrPhones     = allPhones;\n    this.displayPhones = allPhones;\n  }\n\n  openDetails(ddd: string, phone: string) {\n    this.navCtrl.navigateForward('/pg-details/' + ddd + '/' + phone);\n  }\n\n  async addPhone() {\n    const modal = await this.modalController.create({\n        component: PgAddPhonePage,\n    });\n    await modal.present();\n    const { data } = await modal.onWillDismiss();\n    if (data.reload){\n        this.loadPhones();\n    }\n  }\n\n  public filterPhone(evt: any) {\n    const searchTerm = evt.srcElement.value;\n    this.filterStr = searchTerm;\n\n    if (!searchTerm) {\n        this.displayPhones = this.arrPhones;\n        return;\n    }\n\n    this.postFilterPhone(searchTerm);\n  }\n\n  private postFilterPhone(filter: string) {\n    if (filter.trim() === ''){\n        this.displayPhones = this.arrPhones;\n        return\n    }\n    \n    this.displayPhones = this.arrPhones.filter((obj) => {\n      // search by phone nbr\n      const phone = obj.ddd + obj.phone;\n      const foundPhone = phone.indexOf(filter) >= 0;\n\n      // search by contact name\n      const arrContent = obj.content.filter((obj2) => {\n        return obj2.name.toLowerCase().indexOf(filter.toLowerCase()) >=0;\n      });\n      const foundName = arrContent.length > 0;\n\n      return foundPhone || foundName;\n    });\n  }\n\n  public getLastContact(ddd: string, phone: string) {\n    const objPhone = this.arrPhones.find(element => element.ddd === ddd && element.phone === phone);\n    if (typeof objPhone !== 'undefined') {\n        const lastContact = objPhone.content[0];\n        if (typeof lastContact !== 'undefined') {\n            const name    = lastContact.name;\n            const strName = (name !== '') ? ' (' + name + ')' : '';\n\n            return moment(lastContact.date).format('DD/MM/YYYY') + strName;\n        }\n    }\n\n    return ' nenhum contato';\n  }\n\n  async doRefresh(event: any) {\n    const ret = await this.loadPhones();\n\n    setTimeout(() => {\n      event.target.complete();\n    }, 1500);\n  }\n}\n"]}