{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","navCtrl","modalController","db","utils","arrPhones","displayPhones","version","filterStr","getAppVersion","loadPhones","postFilterPhone","getAllPhones","allPhones","ddd","phone","navigateForward","create","modal","present","onWillDismiss","data","reload","evt","searchTerm","srcElement","value","filter","trim","obj","indexOf","objPhone","find","element","lastContact","content","name","strName","date","format","event","ret","setTimeout","target","complete","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"false\\\">\\n  <ion-toolbar> <!-- mode=\\\"ios\\\" -->\\n    <ion-title class=\\\"toolbar-title\\\">\\n        <span class=\\\"title\\\">Testemunho Telefone</span>\\n        <span class=\\\"subtitle\\\">{{ version }}</span>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-fab (click)=\\\"addPhone()\\\" vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button>\\n            <ion-icon class=\\\"icon-footer\\\" name=\\\"add-circle\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n\\n    <div class=\\\"home-header\\\">\\n        <h1 class=\\\"title\\\">Telefones</h1>\\n        <ion-searchbar (ionChange)=\\\"filterPhone($event)\\\" placeholder=\\\"Pesquisar telefone\\\" animated></ion-searchbar>\\n    </div>\\n    <div class=\\\"container\\\">\\n        <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n            <ion-refresher-content></ion-refresher-content>\\n        </ion-refresher>\\n\\n        <ion-card (click)=\\\"openDetails(item.ddd, item.phone)\\\" *ngFor=\\\"let item of displayPhones\\\">\\n            <ion-card-header>\\n                <ion-card-title>\\n                    <ion-icon color=\\\"primary\\\" class=\\\"icon-title\\\" src=\\\"assets/tools-and-utensils.svg\\\"></ion-icon>\\n                    <span>({{ item['ddd'] }}) {{ item['phone'] }}</span>\\n                </ion-card-title>\\n            </ion-card-header>\\n        \\n            <ion-card-content>\\n                <span class=\\\"last-contact\\\">Ãšltimo contato: {{ getLastContact(item['ddd'], item['phone']) }}</span>\\n                <ion-icon color=\\\"primary\\\" class=\\\"arrow-right\\\" src=\\\"assets/seta-direita.svg\\\"></ion-icon>\\n            </ion-card-content>\\n        </ion-card>\\n    </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \".toolbar-title {\\n  overflow: visible;\\n  position: relative;\\n}\\n\\n.toolbar-title .title {\\n  width: 100%;\\n  display: block;\\n  overflow: hidden;\\n  text-align: center;\\n  margin-bottom: -7px;\\n}\\n\\n.toolbar-title .subtitle {\\n  font-size: 66%;\\n  color: #888;\\n}\\n\\n.container {\\n  margin: 24vh 5% 0 5%;\\n}\\n\\nion-card {\\n  margin-bottom: 5vh;\\n  cursor: pointer;\\n}\\n\\n.icon-footer {\\n  font-size: 35px;\\n}\\n\\n.arrow-right {\\n  position: absolute;\\n  right: 18px;\\n  top: -17px;\\n}\\n\\nion-searchbar {\\n  padding: 0 9%;\\n  margin-top: -17px;\\n  color: #FFF;\\n}\\n\\n.last-contact {\\n  font-size: 0.9em;\\n}\\n\\n/* android only */\\n\\n.md ion-searchbar {\\n  color: #000;\\n}\\n\\n/* ============ */\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sZWFuZHJvcGFycmEvRG9jdW1lbnRzL1Byb2pldG9zL3Rlc3RlbXVuaG8tdGVsZWZvbmUvc3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQ0N0Qjs7QURIQTtFQUtRLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7QUNFM0I7O0FEWEE7RUFhUSxjQUFjO0VBQ2QsV0FBVztBQ0VuQjs7QURDQTtFQUNJLG9CQUFvQjtBQ0V4Qjs7QURBQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0FDR2pCOztBRERBO0VBQ0UsZUFBZTtBQ0lqQjs7QURGQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsVUFBVTtBQ0taOztBREhBO0VBQ0ksYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixXQUFXO0FDTWY7O0FESkE7RUFDSSxnQkFBZ0I7QUNPcEI7O0FESkEsaUJBQUE7O0FBQ0E7RUFFUSxXQUFXO0FDTW5COztBREhBLGlCQUFBIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b29sYmFyLXRpdGxlIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAudGl0bGUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogLTdweDtcbiAgICB9XG5cbiAgICAuc3VidGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDY2JTtcbiAgICAgICAgY29sb3I6ICM4ODg7XG4gICAgfVxufVxuLmNvbnRhaW5lciB7XG4gICAgbWFyZ2luOiAyNHZoIDUlIDAgNSU7XG59XG5pb24tY2FyZCB7XG4gIG1hcmdpbi1ib3R0b206IDV2aDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmljb24tZm9vdGVyIHtcbiAgZm9udC1zaXplOiAzNXB4O1xufVxuLmFycm93LXJpZ2h0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMThweDtcbiAgdG9wOiAtMTdweDtcbn1cbmlvbi1zZWFyY2hiYXIge1xuICAgIHBhZGRpbmc6IDAgOSU7XG4gICAgbWFyZ2luLXRvcDogLTE3cHg7XG4gICAgY29sb3I6ICNGRkY7XG59XG4ubGFzdC1jb250YWN0IHtcbiAgICBmb250LXNpemU6IDAuOWVtO1xufVxuXG4vKiBhbmRyb2lkIG9ubHkgKi9cbi5tZCB7XG4gICAgaW9uLXNlYXJjaGJhciB7XG4gICAgICAgIGNvbG9yOiAjMDAwO1xuICAgIH1cbn1cbi8qID09PT09PT09PT09PSAqLyIsIi50b29sYmFyLXRpdGxlIHtcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLnRvb2xiYXItdGl0bGUgLnRpdGxlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IC03cHg7XG59XG5cbi50b29sYmFyLXRpdGxlIC5zdWJ0aXRsZSB7XG4gIGZvbnQtc2l6ZTogNjYlO1xuICBjb2xvcjogIzg4ODtcbn1cblxuLmNvbnRhaW5lciB7XG4gIG1hcmdpbjogMjR2aCA1JSAwIDUlO1xufVxuXG5pb24tY2FyZCB7XG4gIG1hcmdpbi1ib3R0b206IDV2aDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uaWNvbi1mb290ZXIge1xuICBmb250LXNpemU6IDM1cHg7XG59XG5cbi5hcnJvdy1yaWdodCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDE4cHg7XG4gIHRvcDogLTE3cHg7XG59XG5cbmlvbi1zZWFyY2hiYXIge1xuICBwYWRkaW5nOiAwIDklO1xuICBtYXJnaW4tdG9wOiAtMTdweDtcbiAgY29sb3I6ICNGRkY7XG59XG5cbi5sYXN0LWNvbnRhY3Qge1xuICBmb250LXNpemU6IDAuOWVtO1xufVxuXG4vKiBhbmRyb2lkIG9ubHkgKi9cbi5tZCBpb24tc2VhcmNoYmFyIHtcbiAgY29sb3I6ICMwMDA7XG59XG5cbi8qID09PT09PT09PT09PSAqL1xuIl19 */\";","import { Component } from '@angular/core';\nimport { NavController, ModalController } from '@ionic/angular';\n\nimport { UtilsService } from './../utils.service';\nimport { PgAddPhonePage } from '../pg-add-phone/pg-add-phone.page';\nimport { DatabaseService } from './../database.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\n// tslint:disable-next-line: component-class-suffix\nexport class HomePage {\n  arrPhones     = [];\n  displayPhones = [];\n  version       = '';\n  filterStr     = '';\n\n  constructor(\n    private navCtrl: NavController,\n    public modalController: ModalController,\n    public db: DatabaseService,\n    private utils: UtilsService\n  ) {\n    this.version = this.utils.getAppVersion();\n  }\n\n  async ionViewWillEnter() {\n    await this.loadPhones();\n    this.postFilterPhone(this.filterStr);\n  }\n\n  async loadPhones() {\n    const allPhones = await this.db.getAllPhones();\n    this.arrPhones     = allPhones;\n    this.displayPhones = allPhones;\n  }\n\n  openDetails(ddd: string, phone: string) {\n    this.navCtrl.navigateForward('/pg-details/' + ddd + '/' + phone);\n  }\n\n  async addPhone() {\n    const modal = await this.modalController.create({\n        component: PgAddPhonePage,\n    });\n    await modal.present();\n    const { data } = await modal.onWillDismiss();\n    if (data.reload){\n        this.loadPhones();\n    }\n  }\n\n  public filterPhone(evt: any) {\n    const searchTerm = evt.srcElement.value;\n    this.filterStr = searchTerm;\n\n    if (!searchTerm) {\n        this.displayPhones = this.arrPhones;\n        return;\n    }\n\n    this.postFilterPhone(searchTerm);\n  }\n\n  private postFilterPhone(filter: string) {\n    if (filter.trim() === ''){\n        this.displayPhones = this.arrPhones;\n    } else {\n        this.displayPhones = this.arrPhones.filter((obj) => {\n            const phone = obj.ddd + obj.phone;\n            return phone.indexOf(filter) >= 0;\n            // @todo make filter by content name too\n        });\n    }\n  }\n\n  public getLastContact(ddd: string, phone: string) {\n    const objPhone = this.arrPhones.find(element => element.ddd === ddd && element.phone === phone);\n    if (typeof objPhone !== 'undefined') {\n        const lastContact = objPhone.content[0];\n        if (typeof lastContact !== 'undefined') {\n            const name    = lastContact.name;\n            const strName = (name !== '') ? ' (' + name + ')' : '';\n\n            return moment(lastContact.date).format('DD/MM/YYYY') + strName;\n        }\n    }\n\n    return ' nenhum contato';\n  }\n\n  async doRefresh(event: any) {\n    const ret = await this.loadPhones();\n\n    setTimeout(() => {\n      event.target.complete();\n    }, 1500);\n  }\n}\n"]}