{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,mRAAoN,WAAW,ihCAAihC,eAAe,IAAI,iBAAiB,qLAAqL,8CAA8C,2MAA2M,E;;;;;;;;;;;;;;;;;;;ACAxqD;AACc;AAChB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mDAAQ;KACpB;CACF,CAAC;AAMF,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACfO;AACM;AACF;AACA;AACN;AAEuB;AAY9D,IAAa,cAAc,GAA3B,MAAa,cAAc;CAAG;AAAjB,cAAc;IAT1B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,0EAAqB;SACtB;QACD,YAAY,EAAE,CAAC,mDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;AClB3B;AAAe,gFAAiB,sBAAsB,uBAAuB,GAAG,yBAAyB,gBAAgB,mBAAmB,qBAAqB,uBAAuB,wBAAwB,GAAG,4BAA4B,mBAAmB,gBAAgB,GAAG,cAAc,yBAAyB,GAAG,YAAY,uBAAuB,oBAAoB,GAAG,gBAAgB,oBAAoB,GAAG,gBAAgB,uBAAuB,gBAAgB,eAAe,GAAG,iBAAiB,kBAAkB,sBAAsB,gBAAgB,GAAG,iBAAiB,qBAAqB,GAAG,yCAAyC,gBAAgB,GAAG,iEAAiE,mmFAAmmF,E;;;;;;;;;;;;;;;;;;;;;;;ACApxG;AACsB;AAEd;AACiB;AACX;AACvB;AAQjC,IAAa,QAAQ;AADrB,mDAAmD;AACnD,MAAa,QAAQ;IAMnB,YACU,OAAsB,EACvB,eAAgC,EAChC,EAAmB,EAClB,KAAmB;QAHnB,YAAO,GAAP,OAAO,CAAe;QACvB,oBAAe,GAAf,eAAe,CAAiB;QAChC,OAAE,GAAF,EAAE,CAAiB;QAClB,UAAK,GAAL,KAAK,CAAc;QAT7B,cAAS,GAAO,EAAE,CAAC;QACnB,kBAAa,GAAG,EAAE,CAAC;QACnB,YAAO,GAAS,EAAE,CAAC;QACnB,cAAS,GAAO,EAAE,CAAC;QAQjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC5C,CAAC;IAEK,gBAAgB;;YACpB,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;YACxB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACvC,CAAC;KAAA;IAEK,UAAU;;YACd,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC;YAC/C,IAAI,CAAC,SAAS,GAAO,SAAS,CAAC;YAC/B,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;QACjC,CAAC;KAAA;IAED,WAAW,CAAC,GAAW,EAAE,KAAa;QACpC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,GAAG,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC;IACnE,CAAC;IAEK,QAAQ;;YACZ,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC5C,SAAS,EAAE,8EAAc;aAC5B,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,aAAa,EAAE,CAAC;YAC7C,IAAI,IAAI,CAAC,MAAM,EAAC;gBACZ,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;QACH,CAAC;KAAA;IAEM,WAAW,CAAC,GAAQ;QACzB,MAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;QAE5B,IAAI,CAAC,UAAU,EAAE;YACb,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC;YACpC,OAAO;SACV;QAED,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IAEO,eAAe,CAAC,MAAc;QACpC,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,EAAC;YACrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC;YACpC,OAAM;SACT;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE;YACjD,sBAAsB;YACtB,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC;YAClC,MAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAE9C,yBAAyB;YACzB,MAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE;gBAC7C,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,IAAG,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;YACH,MAAM,SAAS,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;YAExC,OAAO,UAAU,IAAI,SAAS,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,cAAc,CAAC,GAAW,EAAE,KAAa;QAC9C,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,KAAK,GAAG,IAAI,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC;QAChG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;YACjC,MAAM,WAAW,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,OAAO,WAAW,KAAK,WAAW,EAAE;gBACpC,MAAM,IAAI,GAAM,WAAW,CAAC,IAAI,CAAC;gBACjC,MAAM,OAAO,GAAG,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;gBAEvD,OAAO,mCAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC;aAClE;SACJ;QAED,OAAO,iBAAiB,CAAC;IAC3B,CAAC;IAEK,SAAS,CAAC,KAAU;;YACxB,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;YAEpC,UAAU,CAAC,GAAG,EAAE;gBACd,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YAC1B,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC;KAAA;CACF;;YAzFoB,4DAAa;YACN,8DAAe;YAC5B,iEAAe;YACX,2DAAY;;AAVlB,QAAQ;IANpB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,8MAA6B;;KAE9B,CAAC;IACF,mDAAmD;GACtC,QAAQ,CAgGpB;AAhGoB","file":"home-home-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"false\\\">\\n  <ion-toolbar> <!-- mode=\\\"ios\\\" -->\\n    <ion-title class=\\\"toolbar-title\\\">\\n        <span class=\\\"title\\\">Testemunho Telefone</span>\\n        <span class=\\\"subtitle\\\">{{ version }}</span>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-fab (click)=\\\"addPhone()\\\" vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button>\\n            <ion-icon class=\\\"icon-footer\\\" name=\\\"add-circle\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n\\n    <div class=\\\"home-header\\\">\\n        <h1 class=\\\"title\\\">Filtrar</h1>\\n        <ion-searchbar (ionChange)=\\\"filterPhone($event)\\\" placeholder=\\\"Digite o telefone/nome\\\" animated></ion-searchbar>\\n    </div>\\n    <div class=\\\"container\\\">\\n        <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n            <ion-refresher-content></ion-refresher-content>\\n        </ion-refresher>\\n\\n        <ion-card (click)=\\\"openDetails(item.ddd, item.phone)\\\" *ngFor=\\\"let item of displayPhones\\\">\\n            <ion-card-header>\\n                <ion-card-title>\\n                    <ion-icon color=\\\"primary\\\" class=\\\"icon-title\\\" src=\\\"assets/tools-and-utensils.svg\\\"></ion-icon>\\n                    <span>({{ item['ddd'] }}) {{ item['phone'] }}</span>\\n                </ion-card-title>\\n            </ion-card-header>\\n        \\n            <ion-card-content>\\n                <span class=\\\"last-contact\\\">Ãšltimo contato: {{ getLastContact(item['ddd'], item['phone']) }}</span>\\n                <ion-icon color=\\\"primary\\\" class=\\\"arrow-right\\\" src=\\\"assets/seta-direita.svg\\\"></ion-icon>\\n            </ion-card-content>\\n        </ion-card>\\n    </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \".toolbar-title {\\n  overflow: visible;\\n  position: relative;\\n}\\n.toolbar-title .title {\\n  width: 100%;\\n  display: block;\\n  overflow: hidden;\\n  text-align: center;\\n  margin-bottom: -7px;\\n}\\n.toolbar-title .subtitle {\\n  font-size: 66%;\\n  color: #888;\\n}\\n.container {\\n  margin: 24vh 5% 0 5%;\\n}\\nion-card {\\n  margin-bottom: 5vh;\\n  cursor: pointer;\\n}\\n.icon-footer {\\n  font-size: 35px;\\n}\\n.arrow-right {\\n  position: absolute;\\n  right: 18px;\\n  top: -17px;\\n}\\nion-searchbar {\\n  padding: 0 9%;\\n  margin-top: -17px;\\n  color: #FFF;\\n}\\n.last-contact {\\n  font-size: 0.9em;\\n}\\n/* android only */\\n.md ion-searchbar {\\n  color: #000;\\n}\\n/* ============ */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sZWFuZHJvcGFycmEvUHJvamVjdHMvdGVzdGVtdW5oby10ZWxlZm9uZS9zcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0o7QURDSTtFQUNJLFdBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FDQ1I7QURFSTtFQUNJLGNBQUE7RUFDQSxXQUFBO0FDQVI7QURHQTtFQUNJLG9CQUFBO0FDQUo7QURFQTtFQUNFLGtCQUFBO0VBQ0EsZUFBQTtBQ0NGO0FEQ0E7RUFDRSxlQUFBO0FDRUY7QURBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QUNHRjtBRERBO0VBQ0ksYUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtBQ0lKO0FERkE7RUFDSSxnQkFBQTtBQ0tKO0FERkEsaUJBQUE7QUFFSTtFQUNJLFdBQUE7QUNJUjtBRERBLGlCQUFBIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b29sYmFyLXRpdGxlIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAudGl0bGUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogLTdweDtcbiAgICB9XG5cbiAgICAuc3VidGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDY2JTtcbiAgICAgICAgY29sb3I6ICM4ODg7XG4gICAgfVxufVxuLmNvbnRhaW5lciB7XG4gICAgbWFyZ2luOiAyNHZoIDUlIDAgNSU7XG59XG5pb24tY2FyZCB7XG4gIG1hcmdpbi1ib3R0b206IDV2aDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmljb24tZm9vdGVyIHtcbiAgZm9udC1zaXplOiAzNXB4O1xufVxuLmFycm93LXJpZ2h0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMThweDtcbiAgdG9wOiAtMTdweDtcbn1cbmlvbi1zZWFyY2hiYXIge1xuICAgIHBhZGRpbmc6IDAgOSU7XG4gICAgbWFyZ2luLXRvcDogLTE3cHg7XG4gICAgY29sb3I6ICNGRkY7XG59XG4ubGFzdC1jb250YWN0IHtcbiAgICBmb250LXNpemU6IDAuOWVtO1xufVxuXG4vKiBhbmRyb2lkIG9ubHkgKi9cbi5tZCB7XG4gICAgaW9uLXNlYXJjaGJhciB7XG4gICAgICAgIGNvbG9yOiAjMDAwO1xuICAgIH1cbn1cbi8qID09PT09PT09PT09PSAqLyIsIi50b29sYmFyLXRpdGxlIHtcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi50b29sYmFyLXRpdGxlIC50aXRsZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAtN3B4O1xufVxuLnRvb2xiYXItdGl0bGUgLnN1YnRpdGxlIHtcbiAgZm9udC1zaXplOiA2NiU7XG4gIGNvbG9yOiAjODg4O1xufVxuXG4uY29udGFpbmVyIHtcbiAgbWFyZ2luOiAyNHZoIDUlIDAgNSU7XG59XG5cbmlvbi1jYXJkIHtcbiAgbWFyZ2luLWJvdHRvbTogNXZoO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5pY29uLWZvb3RlciB7XG4gIGZvbnQtc2l6ZTogMzVweDtcbn1cblxuLmFycm93LXJpZ2h0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMThweDtcbiAgdG9wOiAtMTdweDtcbn1cblxuaW9uLXNlYXJjaGJhciB7XG4gIHBhZGRpbmc6IDAgOSU7XG4gIG1hcmdpbi10b3A6IC0xN3B4O1xuICBjb2xvcjogI0ZGRjtcbn1cblxuLmxhc3QtY29udGFjdCB7XG4gIGZvbnQtc2l6ZTogMC45ZW07XG59XG5cbi8qIGFuZHJvaWQgb25seSAqL1xuLm1kIGlvbi1zZWFyY2hiYXIge1xuICBjb2xvcjogIzAwMDtcbn1cblxuLyogPT09PT09PT09PT09ICovIl19 */\";","import { Component } from '@angular/core';\nimport { NavController, ModalController } from '@ionic/angular';\n\nimport { UtilsService } from './../utils.service';\nimport { PgAddPhonePage } from '../pg-add-phone/pg-add-phone.page';\nimport { DatabaseService } from './../database.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\n// tslint:disable-next-line: component-class-suffix\nexport class HomePage {\n  arrPhones     = [];\n  displayPhones = [];\n  version       = '';\n  filterStr     = '';\n\n  constructor(\n    private navCtrl: NavController,\n    public modalController: ModalController,\n    public db: DatabaseService,\n    private utils: UtilsService\n  ) {\n    this.version = this.utils.getAppVersion();\n  }\n\n  async ionViewWillEnter() {\n    await this.loadPhones();\n    this.postFilterPhone(this.filterStr);\n  }\n\n  async loadPhones() {\n    const allPhones = await this.db.getAllPhones();\n    this.arrPhones     = allPhones;\n    this.displayPhones = allPhones;\n  }\n\n  openDetails(ddd: string, phone: string) {\n    this.navCtrl.navigateForward('/pg-details/' + ddd + '/' + phone);\n  }\n\n  async addPhone() {\n    const modal = await this.modalController.create({\n        component: PgAddPhonePage,\n    });\n    await modal.present();\n    const { data } = await modal.onWillDismiss();\n    if (data.reload){\n        this.loadPhones();\n    }\n  }\n\n  public filterPhone(evt: any) {\n    const searchTerm = evt.srcElement.value;\n    this.filterStr = searchTerm;\n\n    if (!searchTerm) {\n        this.displayPhones = this.arrPhones;\n        return;\n    }\n\n    this.postFilterPhone(searchTerm);\n  }\n\n  private postFilterPhone(filter: string) {\n    if (filter.trim() === ''){\n        this.displayPhones = this.arrPhones;\n        return\n    }\n    \n    this.displayPhones = this.arrPhones.filter((obj) => {\n      // search by phone nbr\n      const phone = obj.ddd + obj.phone;\n      const foundPhone = phone.indexOf(filter) >= 0;\n\n      // search by contact name\n      const arrContent = obj.content.filter((obj2) => {\n        return obj2.name.toLowerCase().indexOf(filter.toLowerCase()) >=0;\n      });\n      const foundName = arrContent.length > 0;\n\n      return foundPhone || foundName;\n    });\n  }\n\n  public getLastContact(ddd: string, phone: string) {\n    const objPhone = this.arrPhones.find(element => element.ddd === ddd && element.phone === phone);\n    if (typeof objPhone !== 'undefined') {\n        const lastContact = objPhone.content[0];\n        if (typeof lastContact !== 'undefined') {\n            const name    = lastContact.name;\n            const strName = (name !== '') ? ' (' + name + ')' : '';\n\n            return moment(lastContact.date).format('DD/MM/YYYY') + strName;\n        }\n    }\n\n    return ' nenhum contato';\n  }\n\n  async doRefresh(event: any) {\n    const ret = await this.loadPhones();\n\n    setTimeout(() => {\n      event.target.complete();\n    }, 1500);\n  }\n}\n"],"sourceRoot":"webpack:///"}